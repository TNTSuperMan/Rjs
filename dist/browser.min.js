var R=function(e){"use strict";let t=[],r=[];const s=()=>r[r.length-1];let o=!1;const c=e=>n(e,e),n=(e,s)=>{r.push([]),o=!0,e(),r.length<=1&&(o=!1);const c=r.pop();return c?(t.push(...c.map((e=>[e[0],e[1],s]))),c.map((e=>[e[0],e[1]]))):[]},h=e=>t=t.filter((t=>!e.some((e=>e[0]!=t[0]||2!=e.length||e[1]==t[1])))),i=[],a=e=>{const r=Symbol(),{proxy:c,revoke:n}=Proxy.revocable(e,{get:(e,t,c)=>(o&&!s().some((e=>e[0]==r&&e[1]==t))&&s().push([r,t]),Reflect.get(e,t,c)),set(e,s,o,c){const n=Reflect.set(e,s,o,c);return t.filter((e=>e[0]==r&&e[1]==s)).forEach((e=>e[2]())),n}});return i.push([e,r,()=>{n(),h([[r]])}]),[c,r]};class u{node;#e;#t;#r;constructor(e,t=[]){this.node=e,this.#e=t,this.#r=e.remove.bind(e),this.#t=[],e.remove=()=>this.destroy()}update(){var e;e=this.#e,t.filter((t=>e.some((e=>e[0]==t[0]&&e[1]==t[1])))).forEach((e=>e[2]()))}destroy(){this.#t.forEach((e=>(e=>{const t=i.findIndex((t=>t[1]==e));-1!=t&&(i[t][2](),i.splice(t,1))})(e))),h(this.#e),this.node.childNodes.forEach((e=>e.remove())),this.#r()}fook(e,t){this.#e.push(...n(e,t))}calculate(e){const t=a({value:e()});return this.#t.push(t[1]),this.#e.push(...c((()=>t[0].value=e()))),t[0]}addProxy(e){this.#t.push(e)}}return e.VNode=u,e.createProxy=a,e.createVElement=function(e,t,r=()=>({}),s={}){const o=document.createElement(e),n=[];return n.push(...c((()=>{Object.entries(r()).forEach((e=>o.setAttribute(e[0],e[1])))}))),n.push(...c((()=>{o.childNodes.forEach((e=>e.remove())),t().forEach((e=>o.appendChild(e.node)))}))),Object.entries(s).forEach((e=>o.addEventListener(e[0],e[1]))),new u(o,n)},e.createVText=function(e){const t=new Text;return new u(t,c((()=>t.nodeValue=e())))},e}({});
